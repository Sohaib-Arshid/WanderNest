<%- layout('./layout/boilerplate.ejs') %>

<body class="bg-gray-100 min-h-screen">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-blue-600 mb-6">Edit Listing</h1>

    <form method="POST" action="/listings/<%= foundlisting._id %>?_method=PUT" enctype="multipart/form-data" class="bg-white shadow-md rounded-lg p-6 space-y-4">
      
      <!-- Title -->
      <div>
        <label for="title" class="block text-gray-700 font-semibold mb-1">Title</label>
        <input type="text" id="title" name="listing[title]" value="<%= foundlisting.title %>" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Description -->
      <div>
        <label for="description" class="block text-gray-700 font-semibold mb-1">Description</label>
        <textarea id="description" name="listing[description]" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"><%= foundlisting.description %></textarea>
      </div>

      <!-- Image Upload -->
      <div>
        <label for="image" class="block text-gray-700 font-semibold mb-1">Image</label>
        <input type="file" id="image" name="image" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <% if (foundlisting.image && foundlisting.image.url) { %>
          <p class="mt-2 text-gray-500">Current Image:</p>
          <img src="<%= foundlisting.image.url %>" alt="<%= foundlisting.title %>" class="w-48 h-32 object-cover rounded mt-1">
        <% } %>
      </div>

      <!-- Price -->
      <div>
        <label for="price" class="block text-gray-700 font-semibold mb-1">Price</label>
        <input type="number" id="price" name="listing[price]" value="<%= foundlisting.price %>" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Location -->
      <div>
        <label for="location" class="block text-gray-700 font-semibold mb-1">Location</label>
        <input type="text" id="location" name="listing[location]" value="<%= foundlisting.location %>" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Country -->
      <div>
        <label for="country" class="block text-gray-700 font-semibold mb-1">Country</label>
        <input type="text" id="country" name="listing[country]" value="<%= foundlisting.country %>" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <!-- Submit Button -->
      <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-500 transition-colors">
        Update Listing
      </button>
    </form>
  </div>
</body>
